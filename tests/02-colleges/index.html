
<!DOCTYPE html>
<html>
<head>
	<title>Colleges</title>

	<!-- css -->
	<!-- <link rel="stylesheet" type="text/css" href=" $dir assets/css/styles.css"> -->

	<!-- javascript -->
	<script type="text/javascript" src="../../assets/js/react.min.js"></script>
	<script type="text/javascript" src="../../assets/js/react-dom.min.js"></script>
	<script type="text/javascript" src="../../assets/js/browser.min.js"></script>
	<script type="text/javascript" src="../../assets/js/underscore-min.js"></script>
	<!-- <script type="text/jsx" src="../assets/js/script.js"></script> -->

</head>
<body>
	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,300' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="styles.css">

<!-- React Code: -->
<script type="text/babel">

// Population: Bar Graph

var PopRow = React.createClass({
  render: function() {
    var name = this.props.college.name;
    var grads = this.props.college.grads;
    var undergrads = this.props.college.undergrads.total;
    var total = grads + undergrads;
    var max = this.props.max;
    var uStyle = { width: undergrads / max * 100 + '%' };
    var gStyle = { width: grads / max * 100 + '%' };

    return (
      <div className="row">
        <div className="bar">
          <div className="b-undergrad" style={uStyle}></div>
          <div className="b-grad" style={gStyle}></div>
        </div>
        <div className="name pad">{name}</div>
        <div className="total pad text-right">{total}</div>
      </div>
    );
  }
});

var PopTable = React.createClass({
  render: function() {
    var c_bigpop = _.max(this.props.colleges, function(c) { return c.undergrads.total; });
    var max = c_bigpop.grads + c_bigpop.undergrads.total;

    var rows = [];
    this.props.colleges.forEach(function(college) {
      rows.push(<PopRow college={college} key={college.name} max={max} />);
    });
    return (
      <div>{rows}</div>
    );
  }
});

// List View (Default)

var ListRow = React.createClass({
  render: function() {
    var name = this.props.college.name;
    var grads = this.props.college.grads;
    var undergrads = this.props.college.undergrads.total;
    var total = grads + undergrads;
    var sat = this.props.college.sat;
    var gpa = this.props.college.gpa;

    return (

      <tr className="pad">
        <td>{name}</td>
        <td>{undergrads}</td>
        <td>{grads}</td>
        <td>{sat}</td>
        <td>{gpa}</td>
      </tr>
    );
  }
});

var ListTable = React.createClass({
  render: function() {
    var rows = [];
    this.props.colleges.forEach(function(college) {
      rows.push(<ListRow college={college} key={college.name} />);
    });
    return (
      <table>
        <thead>
          <tr className="pad">
            <th>College</th>
            <th>Undergrads</th>
            <th>Grads</th>
            <th>SAT</th>
            <th>GPA</th>
          </tr>
        </thead>
        <tbody>
          {rows}
        </tbody>
      </table>
    );
  }
});

// UI Components

var UI = React.createClass({
  getInitialState: function() {
    // TODO: seems redundant; should just go directly to viewList
    return {
      active: 'list',
      view: <ListTable colleges={COLLEGES} />
    };
  },

  viewList: function(event) {
    this.setState({
      active: 'list',
      view: <ListTable colleges={COLLEGES} />
    });
  },

  viewPop: function(event) {
    this.setState({
      active: 'pop',
      view: <PopTable colleges={COLLEGES} />
    });
  },

  render: function() {
    return (
      <div>
        <nav>
          <div className={ this.state.active == 'list' ? 'active' : ''} onClick={ this.viewList }>List</div>
          <div className={ this.state.active == 'pop' ? 'active' : ''} onClick={ this.viewPop }>Population</div>
          <div className={ this.state.active == 'campus' ? 'active' : ''} onClick={ this.handleClick }>On / Off Campus</div>
        </nav>

        <div class="container">
          {this.state.view}
        </div>
      </div>
    );
  }
});

var COLLEGES = [
  {name: 'UC Berkeley', city: 'Berkeley', region: 'CA', type: 'semester', grads: 10125, undergrads: {total: 25774, asians: 9300, latinos: 3320}, liveoncampus: {frosh: 0.95, undergrads: 0.26}, sat: 2124, gpa: 3.9},
  {name: 'UC Riverside', city: 'Riverside', region: 'CA', type: 'quarter', grads: 2676, undergrads: {total: 18621, asians: 6713, latinos: 6678}, liveoncampus: {frosh: 0.74, undergrads: 0.31}, sat: 1720, gpa: 3.6},
  {name: 'UT Austin', city: 'Austin', region: 'TX', type: 'semester', grads: 10994, undergrads: {total: 39979, asians: 7196, latinos: 8679}, liveoncampus: {frosh: 0.639, undergrads: 0.19}, sat: 1859, gpa: 3.63},
  {name: 'University of Washington',  city: 'Seattle', region: 'WA', type: 'quarter', grads: 13635, undergrads: {total: 28933, asians: 7119, latinos: 1813}, liveoncampus: {frosh: 0.65, undergrads: 0.26}, sat: 1795, gpa: 3.75}
];
 
ReactDOM.render(
  <UI colleges={COLLEGES} />,
  document.getElementById('container')
);
      
</script>

<main id="container">
</main>
  
</body>
</html>
